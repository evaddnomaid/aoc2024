perl -n -e 'BEGIN { my $tot = 0; my $condtot = 0; $enable = "do"; }; while (m/mul\(([0-9]{1,3}),([0-9]{1,3})\)|(do)\(\)|(don)''t\(\)/g) { print "Enable: " . $enable . "\n"; if ($1 eq "do" || $1 eq "don") {print $1 . "\n"; $enable = $1;} else { $tot += $1 * $2; if ($enable eq "do") {$condtot += $1 * $2;}} }; END { print "TOTAL: " . $tot . "\n"; print "TOTAL CONDITIONAL: " . $condtot . "\n"; }' < input.txt | uniq
